本项目名为兰兰（Project Lanlan），又名小八（Xiao8）。项目官方地址为https://github.com/wehos/Xiao8，QQ群群号为1048307485。

本项目无需额外配置，只需要填入API KEY，开箱即用。使用步骤如下：


===== 使用说明 =====

  1. 前往阿里云百炼大模型平台（https://bailian.console.aliyun.com/），注册、实名认证后，在页面右下角悬浮窗处领取新人福利。然后，进入API控制台（https://bailian.console.aliyun.com/api-key?tab=model#/api-key），点击右上角“创建我的API-Key”创建成功后，查看并复制API Key。

        > 复制阿里的API Key时，最好使用官网上的复制按钮，不要手动复制。

  2. 运行“启动网页版.bat”即可打开网页版。首次启动请耐心等待至多1分钟，直到浏览器自动启动。根据网页提示，填写API-Key。填写完成后，请关闭网页，数秒后兰兰就会自动启动。

        > 首次启动的等待期间，看到API KEY相关的问题提示，可以无视。

  3. 如果网页版可以正常使用，再继续尝试客户端版。请确保文件夹内的 lanlan_frd.exe 没有被系统或杀毒软件隔离。然后，运行“启动App版.bat”启动客户端。
               
        > 使用结束后，在右下角系统托盘区可以找到小八图标，右键、关闭即可退出App。

        > 网页版和App版同时只能启动一个。如果出现问题，请尝试关闭所有窗口，从右下角系统托盘中退出App版，并考虑使用任务管理器关闭后台与lanlan有关的进程。




===== 人设修改（进阶用户专用） =====

    确认网页版和App版没有启动的情况下，运行“启动设置页.bat”可以进入人设修改页面。以下为人设修改相关说明：

-   初始 猫娘 伙伴的预设名称为小天，建议直接修改名字，并一项一项添加或修改基础人设，但尽量控制数量。
【请先保存基础设置后再进行进阶设置。】

-  进阶人设主要包括Live2D模型设置(live2d)和声音设置(voice_id)。如果你想要更改Live2D模型，请先将模型目录复制到本项目中的static文件夹下。从进阶设置中可以进入Live2D模型管理界面，可以更换模型，并通过拖拽和鼠标滚轮调整模型的位置和大小。如果你想要更改角色声音，请准备一段15秒左右的连贯、干净的语音录音。通过进阶设置进入语音设置页面，上传录音即可完成自定义语音。

-  进阶人设中还有一个system_prompt，可以对系统指令进行完全自定义，但不建议修改。

     修改完成后请关闭修改页的网页和后台，然后再重新启动网页版或App版。


===== 其他说明 =====

本项目的完全体请参见b站up主“W博士家的赛博猫娘们”的视频。up主个人空间味https://space.bilibili.com/576633。开源版会逐步复现直播版的功能。欢迎加入QQ群1048307485吹水。

===== 一些细节（感谢“明天好像没什么”撰写）=====
0.重要参考资料
遇到问题请一定要优先参考：1、网盘里的图文教程（pdf文件）。2、up主在b站的视频（https://www.bilibili.com/video/BV1YCuozXEgw/ 合集系列）。



1. 关于阿里云百炼登录与实名认证
打开阿里云百炼官网：https://bailian.console.aliyun.com/api-key?tab=home#/home
点击上方栏目的模型；如果支付宝已经实名认证建议使用支付宝扫码登录，扫码登录后会有新用户弹窗领取额度即可；如果使用手机号登录的话需要单独进行实名认证：鼠标移动至网页右上角头像点击去阿里云控制台（可能需要再登录一次）右上角点击我的账号找到实名认证入口并认证即可，回到刚刚的页面（阿里云百炼）这头像的左边与网页的右下角均有新人福利领取，点击领取额度即可

2. 关于更换live2d模型的更详细说明
在打开设置页前，请先将你想使用的live2d模型移动到static文件夹，该文件夹内应该包括你的模型文件（后缀为.model3.json的文件）。确保最终目录格式如下（AAA为模型文件夹名称，BBB为后缀是.model3.json的文件名称）/static/AAA/BBB

3. 关于对live2d模型初始外观更改
部分模型的初始外观可能并不让人满意，你可能只是喜欢其中的几个组合，可以通过这个方法来修改开启或关闭模型的某些部件
首先启动网页版按f12在弹出的窗口上方选择控制台在下方输入（如果需要粘贴请先用中文输入允许粘贴并按回车）：window.LanLan1.live2dModel.internalModel.coreModel.setParameterValueById('ParamXXX', 0.0);
（Param后面的XXX内容视自己模型的情况而定：在live2d文件夹里的.cdi3.json后缀的文件里，找到自己所要修改的物品名称在Param后面所显示的数字便是上方XXX所代表的数字）
输入完成按下回车后如果你所选定的部位没有反应那么就修改0.0中两个零的数值（举例：1.0、2.0、0.1、0.2）并再次复制粘贴测试，如果有变动且符合预期进行下一步↓
在项目文件中templates/index.html那里打开方式可以使用windows自带的记事本
并且找到以下这段代码：
window.LanLan1 = window.LanLan1 || {};
        window.LanLan1.live2dModel = model;
找不到的话也可以使用记事本的查找功能找到后在model;后换行输入：model.internalModel.coreModel.setParameterValueById('ParamXXX', X.X);
XXX为上方Param后面的数值，X.X为上方测试成功后所得数值
（如果想添加多个就继续测试下一个live2d模型部件，成功后在上方代码('ParamXXX', X.X);后面继续换行粘贴并修改为测试成功的数值）

